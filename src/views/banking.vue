<template>
   <div
    class="flex flex-col justify-between lg:flex-row md:flex-row  absolute lg:top-[150px] md:top-[150px] top-[110px] left-0 right-0   lg:ml-[125px] md:ml-[125px] ml-4 mr-[20px] "
      
      >
      <h2 
      class="text-white text-lg mb-2 bg font-semibold"
      
      >Project Statistic</h2>


      <div  :class="[
        'transition-colors duration-300',
        isScrollingUp ? 'flex' : 'hidden',
      ]"
      class=" relative gap-6 bg-white/10 backdrop-blur-md rounded-lg flex w-max p-1 "
      
      >

   <button
      v-for="option in options"
      :key="option"
      @click="selected = option"
      :class="[
        'px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200',
        selected === option
          ? 'bg-white/20 text-white shadow-inner'
          : 'text-white hover:bg-white/10'
      ]"
    >
      {{ option }}
    </button>
         
       
      
  </div>


  </div>



 <!-- duplicate -->


    <div
    :class="[
      'transition-colors duration-300',
      isScrollingUp ? 'lg:top-0' : 'lg:top-[-20px]',
    ]"
    class="top-0 left-0 right-0 h-[280px] lg:mt-[150px] md:mt-[550px] mt-[820px] mb-[50px] ml-[10px] lg:ml-[116px] md:ml-[130px]  lg:mr-[600px] md:mr-[450px] mr-[10px] bg-white text-gray-800 rounded-xl shadow-lg p-6 absolute overflow-hidden border"
  >
    <!-- Header -->
    <div class="flex items-center gap-4 mb-4">
      <div class="w-10 h-10 rounded-full bg-[#f3f4f6] flex items-center justify-center">
        <i class="fa-solid fa-copy text-gray-400"></i>
      </div>
      <div>
        <h2 class="text-lg font-semibold">36k Products Shipped</h2>
        <p class="text-sm text-gray-500">Across 14 warehouses</p>
      </div>
      <div class="ml-auto">
        <i class="fa-solid fa-ellipsis-vertical text-gray-400"></i>

      </div>
    </div>

    <!-- Chart Placeholder -->
    <div class="w-full h-[100px]">
      <!-- Replace this with your actual chart component (e.g., Chart.js, ApexCharts, etc) -->
      <canvas id="chartShipped"></canvas>
    </div>

    <!-- Legend -->
    <div class="flex justify-center gap-6 mt-4 text-sm text-gray-600">
      <div class="flex items-center gap-2">
        <span class="w-2 h-2 rounded-full bg-[#1e3a8a]"></span>
        <span>Total Shipped</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-2 h-2 rounded-full bg-[#cbd5e1]"></span>
        <span>Warehouses</span>
      </div>
    </div>
  </div>


  <!-- duplicate 2 -->
    <div
    :class="[
      'transition-colors duration-300',
      isScrollingUp ? 'lg:top-0' : 'lg:top-[-20px]',
    ]"
    class="lg:top-0 md:top-0 top-[250px] left-0 right-0 h-[280px] mt-[880px] lg:mt-[550px] md:mt-[550px] ml-[10px] lg:ml-[760px] md:ml-[500px] mr-[10px] bg-white text-gray-800 rounded-xl shadow-lg p-6 absolute overflow-hidden border"
  >
    <!-- Header -->
    <div class="flex items-center gap-4 mb-4">
      <div class="w-10 h-10 rounded-full bg-[#f3f4f6] flex items-center justify-center">
       <i class="fa-solid fa-bolt"></i>
      </div>
      <div>
        <h2 class="text-lg font-semibold">3.7k Orders Processed</h2>
        <p class="text-sm text-gray-500">Across 9 regions</p>
      </div>
      <div class="ml-auto">
        <i class="fa-solid fa-ellipsis-vertical text-gray-400"></i>
      </div>
    </div>

    <!-- Chart Placeholder -->
    <div class="w-full h-full pb-20">
      <!-- Replace this with your actual chart component (e.g., Chart.js, ApexCharts, etc) -->
    <canvas id="patientChart" height="300"></canvas>
    </div>

    <!-- Legend -->
    <div class="flex justify-center gap-6 mt-4 text-sm text-gray-600">
      <div class="flex items-center gap-2">
        <span class="w-2 h-2 rounded-full bg-[#1e3a8a]"></span>
        <span>Order Volume</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-2 h-2 rounded-full bg-[#cf0707]"></span>
        <span>Coverage Area</span>
      </div>
    </div>
  </div>
  

</template>

<script>
  import {
  Chart,
  LineController,
  LineElement,
  PointElement,
  LinearScale,
  Title,
  CategoryScale,
  Filler,
  ArcElement
} from 'chart.js';

Chart.register(
  LineController,
  LineElement,
  PointElement,
  LinearScale,
  Title,
  CategoryScale,
  Filler,
  ArcElement
);


Chart.register(LineController, LineElement, PointElement, LinearScale, Title, CategoryScale, Filler);


export default {
  name: 'HomeView',
  components: {
    
  },


  data(){
    return{
      dateFilter: 'custom',
      isScrollingUp: true,
      lastScrollY: window.scrollY,
       options: ['Daily', 'Monthly', 'Yearly'],
      selected: 'Daily',
    };
  },
    methods: {
    handleScroll() {
      const currentScrollY = window.scrollY;
      this.isScrollingUp = currentScrollY < this.lastScrollY;
      this.lastScrollY = currentScrollY;
    },
  },


  mounted() {
  window.addEventListener("scroll", this.handleScroll);

  const chartConfigs = [
    {
      id: "chartSold",
      label1: "Products Sold",
      data1: [-100, 2000, -3900, -9400, 9500, -7600, 9700],
      color1: "#1e3a8a",
      label2: "Store Locations",
      data2: [10, 20, 30, 25, 40, 35, 50],
      color2: "#cbd5e1"
    },
    {
      id: "chartShipped",
      label1: "Total Shipped",
      data1: [-500, 3900, -9400, 9600, -5700, 580, -900],
      color1: "#2dd4bf",
      label2: "Warehouses",
      data2: [8, 15, 20, 18, 25, 30, 35],
      color2: "#cbd5e1"
    },
    {
      id: "chartRevenue",
      label1: "Revenue",
      data1: [150, 250, 400, 550, 700, 900, 1000],
      color1: "#16a34a",
      label2: "Expenses",
      data2: [50, 100, 200, 300, 400, 500, 600],
      color2: "#fca5a5"
    },
    {
      id: "chartReturns",
      label1: "Returns",
      data1: [10, 30, 25, 40, 50, 35, 20],
      color1: "#f59e0b",
      label2: "Complaints",
      data2: [2, 5, 3, 6, 7, 4, 1],
      color2: "#fcd34d"
    }
  ];

  chartConfigs.forEach(({ id, label1, data1, color1, label2, data2, color2 }) => {
    const ctx = document.getElementById(id);
    if (!ctx) return;

    new Chart(ctx, {
      type: "line",
      data: {
        labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
        datasets: [
          {
            label: label1,
            data: data1,
            borderColor: color1,
            backgroundColor: color1 + "20",
            fill: true,
            tension: 0.4,
            pointRadius: 0,
            borderWidth: 2
          },
          {
            label: label2,
            data: data2,
            borderColor: color2,
            backgroundColor: color2 + "20",
            fill: true,
            borderDash: [5, 5],
            tension: 0.4,
            pointRadius: 0,
            borderWidth: 2
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          }
        },
        scales: {
          x: { display: false },
          y: { display: false }
        }
      }
    });
  });

  // chartOrdersProcessed â€“ Doughnut (Semi-circle)
  const doughnutCtx = document.getElementById("chartOrdersProcessed");
  if (doughnutCtx) {
    new Chart(doughnutCtx, {
      type: "doughnut",
      data: {
        labels: ["Order Volume", "Coverage Area"],
        datasets: [
          {
            data: [80, 20],
            backgroundColor: ["#64748b", "#f87171"],
            borderWidth: 0
          }
        ]
      },
      options: {
        rotation: -90,
        circumference: 180,
        cutout: "70%",
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          }
        }
      }
    });
  };

  const patientChartCtx = document.getElementById("patientChart");
if (patientChartCtx) {
  new Chart(patientChartCtx, {
    type: "bar",
    data: {
      labels: [
        "15", "16", "17", "18", "19", "20", "21",
        "22", "23", "24", "25", "26", "27", "28", "29"
      ],
      datasets: [
        {
          label: "Patient Admissions Over Time",
          data: [820, 860, 840, 990, 730, 560, 440, 670, 850, 600, 470, 870, 980, 310, 750],
          backgroundColor: "#60a5fa", // blue
          borderRadius: 4
        },
        {
          label: "Bed Occupancy Rate Over Time",
          data: [400, 420, 210, 40, 420, 200, 20, 10, 370, 50, 260, 30, 120, 280, 230],
          backgroundColor: "#cbd5e1", // gray
          borderRadius: 4
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: "bottom"
        }
      },
      scales: {
        x: {
          stacked: false,
          title: {
            display: true,
            text: "Date (July-Aug 2025)"
          }
        },
        y: {
          beginAtZero: true,
          max: 1000,
          title: {
            display: true,
            text: "Count"
          }
        }
      }
    }
  });
}

  }
}
  

</script>
